/********************cpu object array**********************/
var cpuarr = {'cpu':[
	{
		pname:'AMD Ryzen 3 1200',
		pstars:'4.9 stars',
		cores:6,
		maxclock:'3.9Ghz',
		socketype:'AM4',
		tdp:'65W',
		price:[
			{seller:'s1', p:14000},
			{seller:'s2', p:14500},
			{seller:'s3', p:15000},
			{seller:'s4', p:15500},
			{seller:'s5', p:13500},
		]
	},
	{
		pname:'Intel - Core i7-8700K 3.7 GHz 6-Core Processo',
		pstars:'4.9 stars',
		cores:6,
		maxclock:'4.7Ghz',
		socketype:'LGA1151',
		tdp:'95W',
		price:[
			{seller:'s1', p:40000},
			{seller:'s2', p:41500},
			{seller:'s3', p:39000},
			{seller:'s4', p:38500},
			{seller:'s5', p:40500},
		]
	},
	{
		pname:'AMD Ryzen 3 1300X',
		pstars:'5 stars',
		cores:8,
		maxclock:'4.3Ghz',
		socketype:'AM4',
		tdp:'105W',
		price:[
			{seller:'s1', p:17000},
			{seller:'s2', p:17500},
			{seller:'s3', p:17500}
		]
	},
	{
		pname:'Intel - Core i9-9900K',
		pstars:'4.8 stars',
		cores:8,
		maxclock:'5Ghz',
		socketype:'LGA1151',
		tdp:'95W',
		price:[
			{seller:'s1', p:80000},
			{seller:'s2', p:80500},
			{seller:'s3', p:81000},
			{seller:'s4', p:81500},
			{seller:'s5', p:79500},
		]
	},
	{
		pname:'Intel - Core i5-9600K',
		pstars:'4.9 stars',
		cores:6,
		maxclock:'4.6Ghz',
		socketype:'LGA1151',
		tdp:'95W',
		price:[
			{seller:'s1', p:14000},
			{seller:'s2', p:14500},
			{seller:'s3', p:15000},
			{seller:'s4', p:15500},
			{seller:'s5', p:13500}
		]
	},
	{
		pname:'AMD Ryzen 5 1400',
		pstars:'4.9 stars',
		cores:4,
		maxclock:'3.7Ghz',
		socketype:'AM4',
		tdp:'65W',
		price:[
			{seller:'s1', p:14000},
			{seller:'s2', p:19500},
			{seller:'s3', p:15000},
			{seller:'s4', p:15500},
			{seller:'s5', p:13500}
		]
	},
	{
		pname:'Intel - Core i7-8700 3.2 GHz 6-Core Processor',
		pstars:'4.9 stars',
		cores:6,
		maxclock:'4.6Ghz',
		socketype:'LGA1151',
		tdp:'65W',
		price:[
			{seller:'s1', p:14000},
			{seller:'s2', p:19500},
			{seller:'s3', p:19000},
			{seller:'s4', p:19500},
			{seller:'s5', p:19500}
		]
	},
	{
		pname:'AMD - Ryzen 5 2600 3.4 GHz 6-Core Processor',
		pstars:'4.9 stars',
		cores:6,
		maxclock:'3.9Ghz',
		socketype:'AM4',
		tdp:'65W',
		price:[
			{seller:'s1', p:14000},
			{seller:'s2', p:14500},
			{seller:'s3', p:15000},
			{seller:'s4', p:15500},
			{seller:'s5', p:13500}
		]
	},
	{
		pname:'Intel - Core i5-9600K',
		pstars:'4.9 stars',
		cores:6,
		maxclock:'4.6Ghz',
		socketype:'LGA1151',
		tdp:'95W',
		price:[
			{seller:'s1', p:20000},
			{seller:'s2', p:20500},
			{seller:'s3', p:21000},
			{seller:'s4', p:19500},
			{seller:'s5', p:20500}
		]
	},
	{
		pname:'AMD - Ryzen 3 2200G',
		pstars:'4.9 stars',
		cores:4,
		maxclock:'3.7Ghz',
		socketype:'AM4',
		tdp:'65W',
		price:[
			{seller:'s1', p:15500},
			{seller:'s2', p:15600}
		]
	},
	{
		pname:'AMD - Ryzen 5 2600 3.4 GHz 6-Core Processor',
		pstars:'4.9 stars',
		cores:6,
		maxclock:'3.9Ghz',
		socketype:'AM4',
		tdp:'65W',
		price:[
			{seller:'s1', p:14000},
			{seller:'s2', p:15000},
			{seller:'s3', p:15500}
		]
	},
	{
		pname:'Intel - Core i7-8700K 3.7 GHz 6-Core Processo',
		pstars:'4.9 stars',
		cores:6,
		maxclock:'4.7Ghz',
		socketype:'LGA1151',
		tdp:'95W',
		price:[
			{seller:'s1', p:40000},
			{seller:'s2', p:41000},
			{seller:'s3', p:42000},
			{seller:'s4', p:43000}
		]
	}
]};
/********************mobo object array**********************/
var moboarr = {'mobo':[
	{
		pname:'mobo1',
		pstars:'5stars',
		socket:'AM3',
		factor:'ATX',
		chipset:'D',
		ramslots:4,
		price:[
			{seller:'s1', p:4000},
			{seller:'s2', p:4100},
			{seller:'s3', p:4200},
			{seller:'s4', p:4300}
		]
	},
	{
		pname:'mobo2',
		pstars:'4stars',
		socket:'AM3',
		factor:'ATX',
		chipset:'D',
		ramslots:4,
		price:[
			{seller:'s1', p:6000},
			{seller:'s2', p:4100},
			{seller:'s3', p:6200},
			{seller:'s4', p:6300}
		]
	},
	{
		pname:'mobo3',
		pstars:'3stars',
		socket:'AM3',
		factor:'EATX',
		chipset:'D',
		ramslots:8,
		price:[
			{seller:'s1', p:8000},
			{seller:'s2', p:8100},
			{seller:'s3', p:8000},
			{seller:'s4', p:8900}
		]
	}
]};
/********************ram object array**********************/
var ramarr = {'ram':[
	{
		pname:'ram1',
		pstars:'5stars',
		type:'D',
		freq:'3000Mhz',
		dummy1:'d1val',
		dummy2:'d2val',
		price:[
			{seller:'s1', p:4000},
			{seller:'s2', p:4100}
		]
	},
	{
		pname:'ram2',
		pstars:'4stars',
		type:'D',
		freq:'2300Mhz',
		dummy1:'d1val',
		dummy2:'d2val',
		price:[
			{seller:'s1', p:6000},
			{seller:'s2', p:4100},
			{seller:'s3', p:10000},
			{seller:'s4', p:10300}
		]
	},
	{
		pname:'ram3',
		pstars:'3stars',
		type:'D',
		freq:'3100Mhz',
		dummy1:'d1val',
		dummy2:'d2val',
		price:[
			{seller:'s1', p:8000},
			{seller:'s2', p:8100},
			{seller:'s3', p:8800},
			{seller:'s4', p:8900}
		]
	}
]};
/***********************Storage******************/
var storagearr = {'storage':[
	{
    	pname:'storage1',
		pstars:'5stars',
		storagetype:'HDD',
		dummy1:'d1val',
		dummy2:'d2val',
		storagesize:'1TB',
		price:[
			{seller:'s1', p:4000},
			{seller:'s2', p:4100},
      {seller:'s3', p:3900},
      {seller:'s4', p:3800},
      {seller:'s5', p:4200},
      {seller:'s6', p:4400}
		]
	},
  {
		pname:'storage2',
		pstars:'5stars',
		storagetype:'SSD',
		dummy1:'d1val',
		dummy2:'d2val',
		storagesize:'1TB',
    price:[
			{seller:'s1', p:13000},
			{seller:'s2', p:13500},
      {seller:'s3', p:14000},
		]
	},
  {
		pname:'storage3',
		pstars:'5stars',
		storagetype:'M.2',
		dummy1:'d1val',
		dummy2:'d2val',
		storagesize:'1TB',
    price:[
			{seller:'s1', p:40000},
			{seller:'s2', p:41000},
      {seller:'s3', p:39000},
      {seller:'s4', p:30800},
      {seller:'s5', p:40200},
		]
	},
	{
    	pname:'storage4',
		pstars:'3stars',
		storagetype:'SSD',
		dummy1:'d1val',
		dummy2:'d2val',
		storagesize:'4TB',
		price:[
			{seller:'s1', p:48000},
			{seller:'s2', p:49000},
      {seller:'s3', p:50000},
      {seller:'s4', p:51000},
      {seller:'s5', p:47000},
      {seller:'s6', p:44000}
		]
	},
	{
    	pname:'storage5',
		pstars:'5stars',
		storagetype:'HDD',
		dummy1:'d1val',
		dummy2:'d2val',
		storagesize:'14TB',
		price:[
			{seller:'s1', p:15000},
			{seller:'s2', p:16000},
      {seller:'s3', p:17000},
      {seller:'s4', p:15500},
      {seller:'s5', p:16500},
      {seller:'s6', p:17000}
		]
	},
]};
var casearr = {'case':[
	{
		pname:'case1',
		pstars:'5stars',
		dummy1:'d1val',
		dummy2:'d2val',
		formfactor:'ATX',
    fan:'360mm',
		price:[
			{seller:'s1', p:4000},
			{seller:'s2', p:4100}
		]
	},
  {
		pname:'case2',
		pstars:'5stars',
		dummy1:'d1val',
		dummy2:'d2val',
		formfactor:'EATX',
    fan:'360mm',
		price:[
			{seller:'s1', p:4000},
			{seller:'s2', p:4100},
      {seller:'s3', p:5000},
      {seller:'s4', p:4500}
		]
	},
  {
		pname:'case3',
		pstars:'5stars',
		dummy1:'d1val',
		dummy2:'d2val',
		formfactor:'micro-ATX',
    fan:'360mm',
		price:[
			{seller:'s1', p:3800},
			{seller:'s2', p:3700}
		]
	}
]};
var psuarr = {'psu':[
	{
		pname:'psu1',
		psustars:'5stars',
		dummy1:'d1val',
		dummy2:'d2val',
		pow:400,
		price:[
			{seller:'s1', p:2500},
			{seller:'s2', p:2000},
      {seller:'s3', p:1400},
      {seller:'s4', p:2100},
      {seller:'s5', p:2200}
		]
	},
  {
		pname:'psu2',
		pstars:'5stars',
		dummy1:'d1val',
		dummy2:'d2val',
		pow:400,
		price:[
			{seller:'s1', p:1300},
			{seller:'s2', p:1400}
		]
	},
  {
		pname:'psu3',
		pstars:'5stars',
		dummy1:'d1val',
		dummy2:'d2val',
		pow:400,
		price:[
			{seller:'s1', p:4000},
			{seller:'s2', p:4300},
      {seller:'s3', p:4400},
      {seller:'s4', p:4000},
      {seller:'s5', p:3500}
		]
	},
  {
		pname:'psu4',
		pstars:'5stars',
		dummy1:'d1val',
		dummy2:'d2val',
		pow:400,
		price:[
			{seller:'s1', p:5000},
      {seller:'s2', p:5500},
      {seller:'s3', p:4400},
      {seller:'s4', p:5600},
      {seller:'s5', p:4300}
		]
	}
]};
var gpuarr = {'gpu':[
	{
		pname:'gpu1',
		pstars:'5stars',
		dummy1:'d1val',
		dummy2:'d2val',
		memory:8,
    tdp:200,
		price:[
			{seller:'s1', p:40000},
			{seller:'s2', p:41000},
      {seller:'s3', p:39000},
      {seller:'s4', p:39500},
      {seller:'s5', p:41500}
		]
	},
  {
		pname:'gpu2',
		pstars:'5stars',
		dummy1:'d1val',
		dummy2:'d2val',
		memory:8,
    tdp:200,
		price:[
			{seller:'s1', p:15000},
			{seller:'s2', p:16000},
      {seller:'s3', p:16500},
      {seller:'s4', p:15500},
      {seller:'s5', p:14500}
		]
	}
]};

var clen = cpuarr.cpu.length;
var mlen = moboarr.mobo.length;
var rlen = ramarr.ram.length;
var stlen = storagearr.storage.length;
var calen = casearr.case.length;
var plen = psuarr.psu.length;
var glen = gpuarr.gpu.length;
var selectedram=[];
var ramcounter=0;
var ramcounterarr=[];
var selectedstorage=[];
var storagecounter=0;
var storagecounterarr=[];
var c;
var tempcpu = {};
var tempmobo = {};
var tempram = [];
var tempgpu = {};
var tempstorage = [];
var tempcase = {};
var globx = 'cpu';
var comparearr = [];
var cpufilters = [];
var mobofilters = [];
var ramfilters = [];
var storagefilters = [];
var casefilters = [];
var psufilters = [];
var gpufilters = [];

//=========================function making an AJAX  CALL================================
function ajaxcall(url){
	if(window.XMLHttpRequest){
		xhttp = new XMLHttpRequest();
	}else{
		xhttp = new ActiveXObject('Microsoft.XMLHTTP');
	}
	xhttp.open();
	xhttp.send();
	xhttp.onreadystatechange = function(){
		if(this.status==200 && this.readyState==4){
			var response = JSON.parse(xhttp.responseText);
			return response;
		}
	}
}
//===================================================================
/********************cpu object append to divs**********************/
function appendparts(arrname, len, start){
	for(i=start;i<len;i++){
		var slen = arrname[i].price.length;
		if(arrname==cpuarr.cpu){
			$('#lcpu').append('<li><div class="partlist" data-index="'+i+'"><a class="partname" href="details.php">'+cpuarr.cpu[i].pname+'</a><!----><p class="partdetail"><span class="rating">'+cpuarr.cpu[i].pstars+'</span><span class="price">'+cpuarr.cpu[i].price[0].p+'</span></p><p class="comparep"><input type="checkbox" class="comparecheck" id="addtocomparecpu'+i+'"><label for="addtocomparecpu'+i+'">Compare</label></p><div class="compdetails"><p class="firstline"><span class="keys">Cores: </span><span class="values" id="corevalue">'+cpuarr.cpu[i].cores+'</span></p><p class="firstline2"><span class="keys">Max Clock:</span><span class="values" id="maxclockvalue">'+cpuarr.cpu[i].maxclock+'</span></p><p class="secondline"><span class="keys">Socket:</span><span class="values" id="socketvalue">'+cpuarr.cpu[i].socketype+'</span></p><p class="secondline2"><span class="keys">TDP:</span><span class="values" id="tdpvalue">'+cpuarr.cpu[i].tdp+'</span></p></div><button class="add" onclick="addpart($(this).parent())">ADD</button><select class="seller" onchange="changemainsel(this)"></select><span class="sellerspan">Seller : </span></div></li>');
			var t = document.getElementById('lcpu');
		}
		else if(arrname==moboarr.mobo){
			$('#lmobo').append('<li><div class="partlist" data-index="'+i+'"><p id="tdpval">some</p><a class="partname" href="details.php">'+moboarr.mobo[i].pname+'</a><!----><p class="partdetail"><span class="rating">'+moboarr.mobo[i].pstars+'</span><span class="price">'+moboarr.mobo[i].price[0].p+'</span></p><p class="comparep"><input type="checkbox" class="comparecheck" id="addtocomparemobo'+i+'"><label for="addtocomparemobo'+i+'">Compare</label></p><div class="compdetails"><p class="firstline"><span class="keys">Socket: </span><span class="values">'+moboarr.mobo[i].socket+'</span></p><p class="firstline2"><span class="keys">Form Factor:</span><span class="values">'+moboarr.mobo[i].factor+'</span></p><p class="secondline"><span class="keys">Chipset:</span><span class="values">'+moboarr.mobo[i].chipset+'</span></p><p class="secondline2"><span class="keys">RAM slots:</span><span class="values">'+moboarr.mobo[i].ramslots+'</span></p></div><button class="add" onclick="addpart($(this).parent())">ADD</button><select class="seller" onchange="changemainsel(this)"></select><span class="sellerspan">Seller : </span></div></li>');
			var t = document.getElementById('lmobo');
		}
		else if(arrname==ramarr.ram){
			$('#lram').append('<li><div class="partlist" data-index="'+i+'"><p id="tdpval">some</p><a class="partname" href="details.php">'+ramarr.ram[i].pname+'</a><!----><p class="partdetail"><span class="rating">'+ramarr.ram[i].pstars+'</span><span class="price">'+ramarr.ram[i].price[0].p+'</span></p><p class="comparep"><input type="checkbox" class="comparecheck" id="addtocompareram'+i+'"><label for="addtocompareram'+i+'">Compare</label></p><div class="compdetails"><p class="firstline"><span class="keys">Type: </span><span class="values">'+ramarr.ram[i].type+'</span></p><p class="firstline2"><span class="keys">Dummy1:</span><span class="values">'+ramarr.ram[i].dummy1+'</span></p><p class="secondline"><span class="keys">Frequency:</span><span class="values">'+ramarr.ram[i].freq+'</span></p><p class="secondline2"><span class="keys">Dummy2:</span><span class="values">'+ramarr.ram[i].dummy2+'</span></p></div><button class="add" onclick="addpart($(this).parent())">ADD</button><select class="seller" onchange="changemainsel(this)"></select><span class="sellerspan">Seller : </span></div></li>');
			var t = document.getElementById('lram');
		}
    else if(arrname==storagearr.storage){
      $('#lstorage').append('<li><div class="partlist" data-index="'+i+'"><p id="tdpval">some</p><a class="partname" href="details.php">'+storagearr.storage[i].pname+'</a><!----><p class="partdetail"><span class="rating">'+storagearr.storage[i].pstars+'</span><span class="price">'+storagearr.storage[i].price[0].p+'</span></p><p class="comparep"><input type="checkbox" class="comparecheck" id="addtocomparestorage'+i+'"><label for="addtocomparestorage'+i+'">Compare</label></p><div class="compdetails"><p class="firstline"><span class="keys">Type: </span><span class="values">'+storagearr.storage[i].storagetype+'</span></p><p class="firstline2"><span class="keys">Dummy1:</span><span class="values">'+storagearr.storage[i].dummy1+'</span></p><p class="secondline"><span class="keys">Size:</span><span class="values">'+storagearr.storage[i].storagesize+'</span></p><p class="secondline2"><span class="keys">Dummy2:</span><span class="values">'+storagearr.storage[i].dummy2+'</span></p></div><button class="add" onclick="addpart($(this).parent())">ADD</button><select class="seller" onchange="changemainsel(this)"></select><span class="sellerspan">Seller : </span></div></li>');
      var t = document.getElementById('lstorage');
    }
    else if(arrname==casearr.case){
      $('#lcase').append('<li><div class="partlist" data-index="'+i+'"><p id="tdpval">some</p><a class="partname" href="details.php">'+casearr.case[i].pname+'</a><!----><p class="partdetail"><span class="rating">'+casearr.case[i].pstars+'</span><span class="price">'+casearr.case[i].price[0].p+'</span></p><p class="comparep"><input type="checkbox" class="comparecheck" id="addtocomparecase'+i+'"><label for="addtocomparecase'+i+'">Compare</label></p><div class="compdetails"><p class="firstline"><span class="keys">FormFactor: </span><span class="values">'+casearr.case[i].formfactor+'</span></p><p class="firstline2"><span class="keys">Dummy1:</span><span class="values">'+casearr.case[i].dummy1+'</span></p><p class="secondline"><span class="keys">Fans:</span><span class="values">'+casearr.case[i].fan+'</span></p><p class="secondline2"><span class="keys">Dummy2:</span><span class="values">'+casearr.case[i].dummy2+'</span></p></div><button class="add" onclick="addpart($(this).parent())">ADD</button><select class="seller" onchange="changemainsel(this)"></select><span class="sellerspan">Seller : </span></div></li>');
      var t = document.getElementById('lcase');
    }
    else if(arrname==psuarr.psu){
      $('#lpsu').append('<li><div class="partlist" data-index="'+i+'"><p id="tdpval">some</p><a class="partname" href="details.php">'+psuarr.psu[i].pname+'</a><!----><p class="partdetail"><span class="rating">'+psuarr.psu[i].pstars+'</span><span class="price">'+psuarr.psu[i].price[0].p+'</span></p><p class="comparep"><input type="checkbox" class="comparecheck" id="addtocomparepsu'+i+'"><label for="addtocomparepsu'+i+'">Compare</label></p><div class="compdetails"><p class="firstline"><span class="keys">Wattage: </span><span class="values">'+psuarr.psu[i].pow+'</span></p><p class="firstline2"><span class="keys">Dummy1:</span><span class="values">'+psuarr.psu[i].dummy1+'</span></p><p class="secondline"><span class="keys"></span><span class="values"></span></p><p class="secondline2"><span class="keys">Dummy2:</span><span class="values">'+psuarr.psu[i].dummy2+'</span></p></div><button class="add" onclick="addpart($(this).parent())">ADD</button><select class="seller" onchange="changemainsel(this)"></select><span class="sellerspan">Seller : </span></div></li>');
      var t = document.getElementById('lpsu');
    }
    else if(arrname==gpuarr.gpu){
      $('#lgpu').append('<li><div class="partlist" data-index="'+i+'"><p id="tdpval">some</p><a class="partname" href="details.php">'+gpuarr.gpu[i].pname+'</a><!----><p class="partdetail"><span class="rating">'+gpuarr.gpu[i].pstars+'</span><span class="price">'+gpuarr.gpu[i].price[0].p+'</span></p><p class="comparep"><input type="checkbox" class="comparecheck" id="addtocomparegpu'+i+'"><label for="addtocomparegpu'+i+'">Compare</label></p><div class="compdetails"><p class="firstline"><span class="keys">Memory: </span><span class="values">'+gpuarr.gpu[i].memory+'</span></p><p class="firstline2"><span class="keys">Dummy1:</span><span class="values">'+gpuarr.gpu[i].dummy1+'</span></p><p class="secondline"><span class="keys">TDP:</span><span class="values">'+gpuarr.gpu[i].tdp+'</span></p><p class="secondline2"><span class="keys">Dummy2:</span><span class="values">'+gpuarr.gpu[i].dummy2+'</span></p></div><button class="add" onclick="addpart($(this).parent())">ADD</button><select class="seller" onchange="changemainsel(this)"></select><span class="sellerspan">Seller : </span></div></li>');
      var t = document.getElementById('lgpu');
    }
		for(j=0;j<slen;j++){
			var k = t.getElementsByClassName('partlist')[i%5];
			k.querySelector('.seller').innerHTML+='<option value="'+arrname[i].price[j].seller+'">'+arrname[i].price[j].seller+'</option>';
		}
	}
	dragparts();
}
appendparts(cpuarr.cpu, 5, 0);
appendparts(moboarr.mobo, mlen, 0);
appendparts(ramarr.ram, rlen, 0);
appendparts(storagearr.storage, stlen, 0);
appendparts(casearr.case, calen, 0);
appendparts(psuarr.psu, plen, 0);
appendparts(gpuarr.gpu, glen, 0);

/********************snackbar**********************/
function startanimation(inputtext){
	$('.snackbar').finish();
	$('.snackbar .bartext').text(inputtext);
	var snack = $('.snackbar');
	snack.animate({opacity: 0, bottom: '-50%'}, 0);
	snack.animate({opacity: 1, bottom: '35px'}, 600);
	myvar = setTimeout(function(){
		snack.animate({opacity: 0, bottom: '-50%'}, 100);
	}, 4000);
	$('.snackbar span').click(function(){
		clearTimeout(myvar);
		snack.animate({opacity: 0, bottom: '-50%'}, 50);
	});
}
/********************part add to selected part list**********************/
function addpart(part){
	$('.placeholder').addClass('compatible').text('Compatible');
  var pa = part.parent().parent();
  var paid = pa.attr('id');
	paid = "s"+paid;
	var inn = part.attr('data-index');
	var parr;
	if(paid=="slcpu"){
		parr = cpuarr.cpu[inn];
    	tempcpu = parr;
	}
	if(paid=="slmobo"){
		parr = moboarr.mobo[inn];
    	tempmobo = parr;
	}
	if(paid=="slram"){
		parr = ramarr.ram[inn];
		if(!tempram.includes(parr))
			tempram.push(parr);
	}
	if(paid=="slstorage"){
		parr = storagearr.storage[inn];
		if(!tempstorage.includes(parr))
			tempstorage.push(parr);
	}
	if(paid=="slcase"){
		parr = casearr.case[inn];
    	tempcase = parr;
	}
	if(paid=="slpsu"){
		parr = psuarr.psu[inn];
    	temppsu = parr;
	}
	if(paid=="slgpu"){
		parr = gpuarr.gpu[inn];
    	tempgpu = parr;
	}
	var name = parr.pname;
	var price = part.find('.partdetail').find('.price').text();
	/********************getting the price for each seller**********************/
	var slen = parr.price.length;
	var seller = part.find('select option:selected').val();
	if(paid!="slram" && paid!="slstorage"){
		var sel = $('[id="'+ paid +'"]').find('.secondp').find('.seller');
		sel.empty();
		for(i=0;i<slen;i++){
			sel.append('<option value="'+parr.price[i].seller+'">'+parr.price[i].seller+'</option>');
		}
		var tdp;
	  $('[id="'+ paid +'"]').addClass('col').find('.cancelbut').addClass('shown');
	  $('[id="'+ paid +'"]').find('.seller, .sellerspan').addClass('shown');
		$('[id="'+ paid +'"]').find('.secondp').find('.seller').val(seller);
		$('[id="'+ paid +'"]').find('.pname').text(name).parent().next().find('.pprice').text(price);

	}
	if(paid == "slram"){
		$('#slram').addClass('col');
	  	var selectedramlength = selectedram.length;
	  	var fla = 0;
	  	for(var z=0;z<selectedramlength;z++){
	  		if(name == selectedram[z]){
	  			ramcounterarr[z]+=1;
	  			$('[id="ram'+(z+1)+'"]').find('.nu').val(ramcounterarr[z]);
	  			$('[id="ram'+(z+1)+'"]').find('.pprice').text(ramcounterarr[z]*price);
	  			fla=1;
	  			break;
	  		}
	  	}
	  	if(fla==0){
	  		selectedram.push(name);
			ramcounter++;
	  		c = 1;
	  		ramcounterarr.push(c);
	  		$('#slram').append('<div class="ramno" id="ram'+ramcounter+'"><img src="images/cancel.png" class="cancelbut" onclick="cancel(this)"><div class="firstp"><p class="pname">'+name+'</p><input type="number" class="nu" name="num" value="1" min="1" data-value="'+ramcounter+'" onchange="valchange(this)"></div><div class="secondp"><p class="tdp">TDP</p><p class="pprice">'+price+'</p><select class="seller" onchange="changesel(this)"></select><span class="sellerspan">Seller : </span></div></div>');
	  		for(var w = 1;w<=ramcounter;w++){
	  			var ele = document.getElementsByClassName('ramno');
	  			ele[w-1].setAttribute('id', 'ram'+w);
				ele[w-1].querySelector('.nu').setAttribute('data-value', w);
	  		}
	  		var ramno ='ram'+ramcounter;
				var sel = $('[id="'+ ramno +'"]').find('.secondp').find('.seller');
				sel.empty();
				for(i=0;i<slen;i++){
					sel.append('<option value="'+parr.price[i].seller+'">'+parr.price[i].seller+'</option>');
				}
				$('[id="'+ ramno +'"]').find('.secondp').find('.seller').val(seller);
				$('[id="'+ ramno +'"]').find('.cancelbut').addClass('shown');
			  	$('[id="'+ ramno +'"]').find('.seller, .sellerspan').addClass('shown');
				$('[id="'+ ramno +'"]').find('.pname').text(name).parent().next().find('.pprice').text(price);
				$('[id="'+ ramno +'"]').find('.nu').addClass('shown');
	  	}
  }
	if(paid == "slstorage"){
		$('#slstorage').addClass('col');
	  	var selectedstoragelength = selectedstorage.length;
	  	var fla = 0;
	  	for(var z=0;z<selectedstoragelength;z++){
	  		if(name == selectedstorage[z]){
	  			storagecounterarr[z]+=1;
	  			$('[id="storage'+(z+1)+'"]').find('.nu').val(storagecounterarr[z]);
	  			$('[id="storage'+(z+1)+'"]').find('.pprice').text(storagecounterarr[z]*price);
	  			fla=1;
	  			break;
	  		}
	  	}
	  	if(fla==0){
	  		selectedstorage.push(name);
				storagecounter++;
	  		c = 1;
	  		storagecounterarr.push(c);
	  		$('#slstorage').append('<div class="storageno" id="storage'+storagecounter+'"><img src="images/cancel.png" class="cancelbut" onclick="cancel(this)"><div class="firstp"><p class="pname">'+name+'</p><input type="number" class="nu" name="num" value="1" min="1" data-value="'+storagecounter+'" onchange="valchange(this)"></div><div class="secondp"><p class="tdp">TDP</p><p class="pprice">'+price+'</p><select class="seller" onchange="changesel(this)"></select><span class="sellerspan">Seller : </span></div></div>');
	  		for(var w = 1;w<=storagecounter;w++){
	  			var ele = document.getElementsByClassName('storageno');
	  			ele[w-1].setAttribute('id', 'storage'+w);
					ele[w-1].querySelector('.nu').setAttribute('data-value', w);
	  		}
	  		var storageno ='storage'+storagecounter;
				var sel = $('[id="'+ storageno +'"]').find('.secondp').find('.seller');
				sel.empty();
				for(i=0;i<slen;i++){
					sel.append('<option value="'+parr.price[i].seller+'">'+parr.price[i].seller+'</option>');
				}
				$('[id="'+ storageno +'"]').find('.secondp').find('.seller').val(seller);
				$('[id="'+ storageno +'"]').find('.cancelbut').addClass('shown');
			  	$('[id="'+ storageno +'"]').find('.seller, .sellerspan').addClass('shown');
				$('[id="'+ storageno +'"]').find('.pname').text(name).parent().next().find('.pprice').text(price);
				$('[id="'+ storageno +'"]').find('.nu').addClass('shown');
	  	}
  }
	if(paid=="slcpu" || paid == "slgpu"){
		tdp = part.find('.compdetails').find('#tdpvalue').text();
	}
	else{
		tdp = part.find('#tdpval').text();
	}
	$('[id="'+ paid +'"]').find('.tdp').text(tdp);
}
function cancel(t){
	var n = $(t).parent().attr('id');
	var mn = n;
	n = n.substring(2, n.length).toUpperCase();
	mn = mn.substring(0,mn.length-1);
	if(mn == "ram"){
		ramcounter--;
		var noram = $(t).parent().attr('id');
		var nrlen = noram.length;
		noram = noram.substring(nrlen-1, nrlen);
		noram = parseInt(noram);
		var ran = $(t).parent().find('.firstp').find('.pname').text();
		var nindex = selectedram.indexOf(ran);
		selectedram.splice(nindex, 1);
		ramcounterarr.splice(nindex, 1);
		tempram.splice(nindex, 1);
		$(t).parent().remove();
		$(t).parent().parent().removeClass('col');
		$(t).parent().find('.nu').val(ramcounterarr[noram]);
		if(tempram.length == 0){
			$('#slram').removeClass('col');
		}
	}
	else if(mn == "storage"){
		storagecounter--;
		var nostorage = $(t).parent().attr('id');
		var nrlen = nostorage.length;
		nostorage = nostorage.substring(nrlen-1, nrlen);
		nostorage = parseInt(nostorage);
		var ran = $(t).parent().find('.firstp').find('.pname').text();
		var nindex = selectedstorage.indexOf(ran);
		selectedstorage.splice(nindex, 1);
		storagecounterarr.splice(nindex, 1);
		tempstorage.splice(nindex, 1);
		$(t).parent().remove();
		$(t).parent().parent().removeClass('col');
		$(t).parent().find('.nu').val(storagecounterarr[nostorage]);
		if(tempstorage.length == 0){
			$('#slstorage').removeClass('col');
		}
	}
	else{
		$(t).removeClass('shown').parent().removeClass('col');
		$(t).parent().find('.firstp').find('.pname').text(n).parent().next().find('.pprice').text('price');
		$(t).parent().find('.secondp').find('.seller, .sellerspan').removeClass('shown').parent().find('.tdp').text('TDP');
	}
}
function valchange(y){
	var nuval = $(y).attr('data-value');
	nuval = nuval-1;
	var v = $(y).val()
	v = parseInt(v);
	var par = $(y).parent().parent();
	if(par.hasClass('storageno')){
		counterarr = storagecounterarr;
		tempa = tempstorage;
	}
	else if (par.hasClass('ramno')) {
		counterarr = ramcounterarr;
		tempa = tempram;
	}
	counterarr[nuval] = v;
	var selectedsel = $(y).parent().next().find('option:selected').val();
	var tempapricelength = tempa[nuval].price.length;
	var s = 0;
	for(s = 0;s<tempapricelength;s++){
		if(selectedsel == tempa[nuval].price[s].seller){
			break;
		}
	}
	var pr = tempa[nuval].price[s].p;
	$(y).parent().next().find('.pprice').text(v*pr);
}
function changesel(t){
	var parid = $(t).parent().parent();
	if(parid.hasClass('spart')){
		var svalue = $(t).find('option:selected').val();
	  var par = $(t).parent().parent().attr('id');
	  var j;
	  var temppricelength;
	  if(par == 'slcpu'){
	    temppricelength = tempcpu.price.length;
	    for(var l=0;l<temppricelength;l++){
	      if(svalue == tempcpu.price[l].seller){
	        j = tempcpu.price[l].p;
	        break;
	      }
	    }
	  }
	  if(par == 'slmobo'){
	    temppricelength = tempmobo.price.length;
	    for(var l=0;l<temppricelength;l++){
	      if(svalue == tempmobo.price[l].seller){
	        j = tempmobo.price[l].p;
	        break;
	      }
	    }
	  }
	  if(par == 'slgpu'){
	    temppricelength = tempgpu.price.length;
	    for(var l=0;l<temppricelength;l++){
	      if(svalue == tempgpu.price[l].seller){
	        j = tempgpu.price[l].p;
	        break;
	      }
	    }
	  }if(par == 'slstorage'){
	    temppricelength = tempstorage.price.length;
	    for(var l=0;l<temppricelength;l++){
	      if(svalue == tempstorage.price[l].seller){
	        j = tempstorage.price[l].p;
	        break;
	      }
	    }
	  }
	  if(par == 'slcase'){
	    temppricelength = tempcase.price.length;
	    for(var l=0;l<temppricelength;l++){
	      if(svalue == tempcase.price[l].seller){
	        j = tempcase.price[l].p;
	        break;
	      }
	    }
	  }
		$(t).parent().parent().find('.pprice').text(j);
	}
	else{
		y = $(t).parent().prev().find('.nu');
		valchange(y);
	}
}
pages = 7;
for(var f = 1;f<=pages;f++){
	$('.pagination').append('<a class="paginationlink" data-index="'+f+'">'+f+'</a>');
	if(f == 1){
		$('.paginationlink').addClass('activepage');
	}
}
function changemainsel(t){
	var pa = $('.sho').attr('id');
	var ind = $(t).parent().attr('data-index');
	var sval = $(t).find('option:selected').val();
	if(pa == 'lcpu'){
		pa = cpuarr.cpu;
	}
	if(pa == 'lmobo'){
		pa = moboarr.mobo;
	}
	if(pa == 'lram'){
		pa = ramarr.ram;
	}
	if(pa == 'lstorage'){
		pa = storagearr.storage;
	}
	if(pa == 'lcase'){
		pa = casearr.case;
	}
	if(pa == 'lpsu'){
		pa = psuarr.psu;
	}
	if(pa == 'lgpu'){
		pa = gpuarr.gpu;
	}
	var len = pa[ind].price.length;
	for(i=0;i<len;i++){
		if(sval == pa[ind].price[i].seller){
			break;
		}
	}
	$(t).parent().parent().find('.partdetail').find('.price').text(pa[ind].price[i].p);
}
function getform(arrnam){
	if(arrnam == 'cpufilters'){
		arrnam = cpufilters;
		arrnam=[];
		arrnam.push($('#freqvaluelow').val());
		arrnam.push($('#freqvaluehigh').val());
		$('#cpufilters .subfilters input').each(function(){
			var che = $(this).prop('checked');
			arrnam.push(che);
		});
		arrnam.push($('#corevaluelow').val());
		arrnam.push($('#corevaluehigh').val());
		arrnam.push($('#threadvaluelow').val());
		arrnam.push($('#threadvaluehigh').val());
		arrnam.push($('#cpufilters #integratedgpu').prop('checked'));
		arrnam.push($('#pricevaluelow').val());
		arrnam.push($('#pricevaluehigh').val());
		alert(arrnam);
	}
	if(arrnam == 'mobofilters'){
		arrnam = mobofilters;
		arrnam=[];
		$('#mobofilters .subfilters input').each(function(){
			var che = $(this).prop('checked');
			arrnam.push(che);
		});
		arrnam.push($('#mobofilters #pricevaluelow').val());
		arrnam.push($('#mobofilters #pricevaluehigh').val());
		alert(arrnam);
	}
	if(arrnam == 'ramfilters'){
		arrnam = ramfilters;
		arrnam=[];
		arrnam.push($('#ramfilters #pricevaluelow').val());
		arrnam.push($('#ramfilters #pricevaluehigh').val());
		alert(arrnam);
	}
	if(arrnam == 'storagefilters'){
		arrnam = storagefilters;
		arrnam=[];
		$('#storagefilters .subfilters input').each(function(){
			var che = $(this).prop('checked');
			arrnam.push(che);
		});
		arrnam.push($('#storagefilters #pricevaluelow').val());
		arrnam.push($('#storagefilters #pricevaluehigh').val());
		alert(arrnam);
	}
	if(arrnam == 'casefilters'){
		arrnam = casefilters;
	}
	if(arrnam == 'psufilters'){
		arrnam = psufilters;
	}
	if(arrnam == 'gpufilters'){
		arrnam = gpufilters;
		arrnam=[];
		arrnam.push($('#gpufilters #freqvaluelow').val());
		arrnam.push($('#gpufilters #freqvaluehigh').val());
		$('#gpufilters .subfilters input').each(function(){
			var che = $(this).prop('checked');
			arrnam.push(che);
		});
		arrnam.push($('#gpufilters #pricevaluelow').val());
		arrnam.push($('#gpufilters #pricevaluehigh').val());
		alert(arrnam);
	}
}
function dragparts(){
	$('.partlist').draggable({containment: [200, 120, 4000, 200000],addClasses:false, revert: false, zIndex:10,scroll:false, helper:'clone',
		start:function(event, ui){
			content = $(this);
			$("#mainparts").addClass('gra');
			$("#showbuild").addClass('grabbed');
		},
		stop:function(){
			$(this).removeClass('help');
			$("#mainparts").removeClass('gra');
			$("#showbuild").removeClass('grabbed');
		},
	});

}
$(document).ready(function(){
/***********load cpus*********/

	$('.subfilters input').change(function(){
		var v = $(this).val();
	});
	var wid = $(window).width();
	var hi = window.innerHeight;
	count = 0;
	$('.permavalue').click(function(){
		$(this).select();
	});
	$(".copylink").click(function(){
		$(this).prev().select();
		document.execCommand('copy');
	});
	$("#showbuild").droppable({'hoverClass':'hovered', tolerance:"touch",
		drop:function(){
			addpart(content);
		}
	});
	$('#showbuild').click(function(){
		$('.overlaydiv').addClass('co');
	});
	$('.spandiv').click(function(){
		$('.overlaydiv').removeClass('co');
	});
	$('#mainselectedparts').css("height", hi);
	var w = $(".main").width();
	$('#total').css('width', w);
	if(wid>=1280){
		$('.right').removeClass('gettoright');
	}
	else{
		$('.right').addClass('gettoright');
	}
	if(wid > 1010){
		$('.main #mainselectedparts').removeClass('getside');
	}
	else{
		$('.main #mainselectedparts').addClass('getside');
		$('#searchbar').css("width", w - 200);
	}
	var po = $('.permaoptions').width();
	$('.permalink').css('width', $('.permalinkdiv').width()-po-100);
	var p = $('.permalink').width();
	$('.permavalue').css('width', p-121);
	var cont = $('#cont').width();
	$('#searchbar').css('width', cont-185);
	$('.showparts').css('width', cont-185);
	$(window).scroll(function(){
		var a = $('.header').height();
		var x = $('body').scrollTop();
		if($(window).width() >= 452){
			if(x>=a){
				$('#mainselectedparts').addClass('sc');
			}
			else{
				$('#mainselectedparts').removeClass('sc');
			}
		}
	});
	$(window).resize(function(){
		var cont = $('#cont').width();
		$('#searchbar').css('width', cont-185);
		$('.showparts').css('width', cont-185);
		var wid = $(window).width();
		var w = $(".main").width();
		var po = $('.permaoptions').width();
		$('.permalink').css('width', $('.permalinkdiv').width()-po-100);
		var p = $(".permalink").width();
		$('#total').css('width', w);
		$('.permavalue').css('width', p-121);
		if(wid>=1280){
			$('.right').removeClass('gettoright');
		}
		else{
			$('.right').addClass('gettoright');
		}
		if(wid > 1010){
			$('.main #mainselectedparts').removeClass('getside');
			/*$('#searchbar').css("width", w - 550);
			$('.showparts').css("width", w - 550);*/
		}
		else{
			$('.main #mainselectedparts').addClass('getside');
			$("#mainparts").css("width", w - 80);
			$('#searchbar').css("width", w - 200);
			$('.showparts').css("width", w - 200);
		}
		if(wid<=1009){
			$('#leftarrow').click(function(){
				$(this).toggleClass('rightarrow');
				$("#mainselectedparts").toggleClass('vis');
			});
		}
	});
	$("#maintabs button").click(function(){
		$("#maintabs button").removeClass('selectedtab');
		$(".list").removeClass('sho');
		$(this).toggleClass('selectedtab');
		var x = $(this).attr('id');
		$('.list[id="l'+x+'"]').toggleClass('sho');
		$('.filters').hide();
		$('.filters[id="'+x+'filters"]').show();
		globx = x;
		/********loadmobo*********/
		//makeajaxcall(x);

	});
	$('.cancelbut').click(function(){
		cancel(this);
	});
	$("#searchbar").click(function(){
		$(this).parent().next().toggleClass('show');
	});
	$(".showparts p").click(function(){
		var na = $(this).find('.lpartname').text();
		$(this).parent().removeClass('show');
		$('.sho .partlist .partname').each(function(){
			var i = $(this).text();
			if(i === na){
				$(this).parent().parent().css("display", '');
			}
			else{
				$(this).parent().parent().css("display", 'none');
			}
		});
	});
	$('.spart .seller').change(function(){
		changesel(this);
	});
	$('#gotocompare').click(function(event){
		if(comparearr.length >= 2 && comparearr.length <=3){
			$(this).parent().attr('href', 'compare'+globx+'.php');
		}
		else{
			startanimation('Minimum 2 and maximum 3 parts to be selected!');
		}
	});
	$('.paginationlink').click(function(){
		$('.paginationlink').removeClass('activepage');
		$(this).addClass('activepage');
		$('#lcpu').empty();
		var x = $(this).attr('data-index');
		/**********AJAX CALL*************/
		if(x*5>clen){
			appendparts(cpuarr.cpu, clen, (x-1)*5);
		}
		else{
			appendparts(cpuarr.cpu, x*5, (x-1)*5);
		}
	});
	$('.comparecheck').change(function(){
		var compareitem = $(this).parent().parent().find('.partname').text();
		if($(this).prop('checked')){
			if(!comparearr.includes(compareitem)){
				comparearr.push(compareitem);
			}
		}
		else {
			var itemindex = comparearr.indexOf(compareitem);
			comparearr.splice(itemindex, 1);
		}
	});
	$('.filters > *').change(function(){
		$('.apply').show();
	});
	$('.apply').click(function(){
		//AJAX CALL HERE
		$(this).hide();
	});
});
